-- Insert form with rules as JSONB
INSERT INTO forms (version)
VALUES (1);

-- Insert question groups
INSERT INTO question_groups (form_id, group_name)
VALUES (1, 'Dádivas Anteriores'),
       (1, 'Viagens'),
       (1, 'Saúde Geral'),
       (1, 'Sintomas'),
       (1, 'Possíveis Pontos de Entrada'),
       (1, 'Mais Pontos de Entrada'),
       (1, 'Comportamentos de Risco');

-- Insert questions for the 'Dádivas Anteriores' group
INSERT INTO questions (id, group_id, text, response_type, question_order)
VALUES ('Q3', 1, 'Alguma vez deu sangue ou componentes sanguíneos?', 'boolean', 1),
       ('Q4', 1, 'Deu sangue há menos de 2 meses?', 'boolean', 2),
       ('Q5', 1, 'Alguma vez lhe foi aplicada uma suspensão para a dádiva de sangue?', 'boolean', 3),
       ('Q6', 1, 'Ocorreu alguma reação ou incidente nas dádivas anteriores?', 'boolean', 4),
       ('Q2', 1, 'Sente-se bem de saúde e em condições de dar sangue?', 'boolean', 5);

-- Insert questions for the 'Viagens' group
INSERT INTO questions (id, group_id, text, response_type, question_order)
VALUES ('Q7', 2, 'Os seus pais biológicos nasceram e viveram sempre em Portugal?', 'boolean', 1),
       ('Q8', 2, 'Nasceu e viveu sempre em Portugal?', 'boolean', 2),
       ('Q8-1', 2, 'Quando mudou de país de residência?', 'text', 3),
       ('Q8-2', 2, 'Quando mudou de país de residência?', 'dropdown', 4),
       ('Q9', 2, 'Alguma vez viajou para fora do país?', 'boolean', 5),
       ('Q10', 2,
        'Nos últimos 4 meses viajou (mesmo que em trânsito), residiu ou trabalhou em alguma zona com foco de transmissão ativa/surto ou endémica para doença infeciosa?',
        'boolean', 6),
       ('Q11', 2, 'Viveu no Reino Unido mais de 12 meses cumulativos, entre janeiro de 1980 e dezembro de 1996?',
        'boolean', 7);

-- Insert questions for the 'Saúde Geral' group
INSERT INTO questions (id, group_id, text, response_type, question_order)
VALUES ('Q19', 4, 'Nos últimos 3 meses perdeu peso por motivos de saúde ou desconhecidos?', 'boolean', 1),
       ('Q20', 4,
        'No último mês teve algum problema de saúde (ex.: tosse, febre, dores musculares, dores de cabeça, cansaço fácil, dificuldade em respirar, falta de paladar, falta de olfato, diarreia, vómitos, alterações cutâneas ou outros)?',
        'boolean', 2);

-- Insert questions for the 'Sintomas' group
INSERT INTO questions (id, group_id, text, response_type, question_order)
VALUES ('Q12', 3, 'Tem sido sempre saudável?', 'boolean', 1),
       ('Q13', 3, 'Teve alguma doença crónica ou acidente grave?', 'boolean', 2),
       ('Q14', 3, 'Já esteve internado(a) num hospital ou maternidade?', 'boolean', 3),
       ('Q15', 3, 'Alguma vez fez uma cirurgia (incluindo cesariana)?', 'boolean', 4),
       ('Q16', 3, 'Já teve convulsões e/ou ataques epiléticos?', 'boolean', 5),
       ('Q17', 3,
        'Foi submetido a um transplante de tecidos (ex.: córnea), células ou à administração de outros produtos biológicos?',
        'boolean', 6),
       ('Q18', 3, 'Recebeu alguma transfusão depois de 1980?', 'boolean', 7);

-- Insert questions for the 'Possíveis Pontos de Entrada' group
INSERT INTO questions (id, group_id, text, response_type, question_order)
VALUES ('Q21', 5, 'Nos últimos 3 meses esteve em contacto próximo com caso suspeito ou positivo de doença infecciosa?',
        'boolean', 1),
       ('Q22', 5, 'Tomou ou está a tomar medicamentos?', 'boolean', 2),
       ('Q23', 5, 'Fez ou está a fazer profilaxia ou tratamento para doença infeciosa?', 'boolean', 3),
       ('Q24', 5, 'Nos últimos 7 dias fez tratamento ou extração dentária?', 'boolean', 4),
       ('Q25', 5, 'No último mês tomou alguma vacina?', 'boolean', 5),
       ('Q26', 5, 'Fez ou está a fazer algum tratamento para a infertilidade?', 'boolean', 6),
       ('Q27', 5, 'Está ou esteve grávida?', 'boolean', 7);

-- Insert questions for the 'Mais Pontos de Entrada' group
INSERT INTO questions (id, group_id, text, response_type, question_order)
VALUES ('Q28', 6,
        'Nos últimos 4 meses fez alguma tatuagem, colocou piercing ou fez tratamento de acupuntura ou de mesoterapia?',
        'boolean', 1),
       ('Q29', 6, 'Nos últimos 4 meses fez alguna endoscopia (ex.: gastroscópia, colonoscopia, citostopia)?', 'boolean',
        2);

-- Insert questions for the 'Comportamentos de Risco' group
INSERT INTO questions (id, group_id, text, response_type, question_order)
VALUES ('Q30', 7, 'Nos últimos 3 meses teve contacto sexual com uma nova pessoa', 'boolean', 1),
       ('Q31', 7, 'Nos últimos 3 meses teve contacto sexual com mais do que uma pessoa', 'boolean', 2),
       ('Q32', 7,
        'Nos últimos 12 meses teve contacto sexual com uma pessoa infetada ou em tratamento para o Vírus da SIDA (VIH), Hepatite B, C ou Sífilis?',
        'boolean', 3),
       ('Q33', 7,
        'Alguma vez teve contactos sexuais mediante recebimento de contrapartidas financeiras ou equivalentes (dinheiro, drogas ou outras)?',
        'boolean', 4),
       ('Q34', 7, 'Alguma vez consumiu drogas (injetáveis, inaláveis, ingeridas ou outras)?', 'boolean', 5),
       ('Q35', 7,
        'A pessoa com quem tem contacto sexual tem algum dos comportamentos referidos nas questões 31, 33 e 34?',
        'boolean', 6);

INSERT INTO rules (event_type, event_params)
VALUES ('showQuestion', 'q3'),
       ('showQuestion', 'q4'),
       ('showQuestion', 'q5'),
       ('showQuestion', 'q6'),
       ('showQuestion', 'q2'),
       ('nextGroup', null),
       ('showQuestion', 'Q7'),
       ('showQuestion', 'Q8'),
       ('showQuestion', 'Q8-1'),
       ('showQuestion', 'Q8-2'),
       ('showQuestion', 'Q9'),
       ('showQuestion', 'Q10'),
       ('showQuestion', 'Q11'),
       ('nextGroup', null),
       ('showQuestion', 'Q12'),
       ('showQuestion', 'Q13'),
       ('showQuestion', 'Q14'),
       ('showQuestion', 'Q15'),
       ('showQuestion', 'Q16'),
       ('showQuestion', 'Q17'),
       ('showQuestion', 'Q18'),
       ('nextGroup', null),
       ('showQuestion', 'Q19'),
       ('showQuestion', 'Q20'),
       ('nextGroup', null),
       ('showQuestion', 'Q21'),
       ('showQuestion', 'Q22'),
       ('showQuestion', 'Q23'),
       ('showQuestion', 'Q24'),
       ('showQuestion', 'Q25'),
       ('showQuestion', 'Q26'),
       ('showQuestion', 'Q27'),
       ('nextGroup', null),
       ('showQuestion', 'Q28'),
       ('showQuestion', 'Q29'),
       ('nextGroup', null),
       ('showQuestion', 'Q30'),
       ('showQuestion', 'Q31'),
       ('showQuestion', 'Q32'),
       ('showQuestion', 'Q33'),
       ('showQuestion', 'Q34'),
       ('showQuestion', 'Q35'),
       ('showReview', null);

-- Insert rule conditions
INSERT INTO logical_conditions (rule_id, condition_type)
VALUES (1, 'all'),
       (2, 'all'),
       (3, 'all'),
       (4, 'all'),
       (5, 'all'),
       (6, 'all'),
       (7, 'all'),
       (8, 'all'),
       (9, 'all'),
       (10, 'all'),
       (11, 'all'),
       (12, 'all'),
       (13, 'all'),
       (14, 'all'),
       (15, 'all'),
       (16, 'all'),
       (17, 'all'),
       (18, 'all'),
       (19, 'all'),
       (20, 'all'),
       (21, 'all'),
       (22, 'all'),
       (23, 'all'),
       (24, 'all'),
       (25, 'all'),
       (26, 'all'),
       (27, 'all'),
       (28, 'all'),
       (29, 'all'),
       (30, 'all'),
       (31, 'all'),
       (32, 'all'),
       (33, 'all'),
       (34, 'all'),
       (35, 'all'),
       (36, 'all'),
       (37, 'all'),
       (38, 'all'),
       (39, 'all'),
       (40, 'all'),
       (41, 'all'),
       (42, 'all'),
       (43, 'all'),
       (1, 'any'),
       (2, 'any'),
       (3, 'any'),
       (4, 'any'),
       (5, 'any'),
       (6, 'any'),
       (7, 'any'),
       (8, 'any'),
       (9, 'any'),
       (10, 'any'),
       (11, 'any'),
       (12, 'any'),
       (13, 'any'),
       (14, 'any'),
       (15, 'any'),
       (16, 'any'),
       (17, 'any'),
       (18, 'any'),
       (19, 'any'),
       (20, 'any'),
       (21, 'any'),
       (22, 'any'),
       (23, 'any'),
       (24, 'any'),
       (25, 'any'),
       (26, 'any'),
       (27, 'any'),
       (28, 'any'),
       (29, 'any'),
       (30, 'any'),
       (31, 'any'),
       (32, 'any'),
       (33, 'any'),
       (34, 'any'),
       (35, 'any'),
       (36, 'any'),
       (37, 'any'),
       (38, 'any'),
       (39, 'any'),
       (40, 'any'),
       (41, 'any'),
       (42, 'any'),
       (43, 'any');

-- Then your insert into evaluation_conditions should work

insert into evaluation_conditions (condition_id, fact, operator, value)
values (1, 'Q3', NULL, NULL),
       (2, 'Q3', 'notEqual', ''),
       (3, 'Q4', 'notEqual', ''),
       (4, 'Q5', 'notEqual', ''),
       (5, 'Q6', 'notEqual', ''),
       (6, 'Q3', 'notEqual', ''),
       (6, 'Q4', 'notEqual', ''),
       (6, 'Q5', 'notEqual', ''),
       (6, 'Q6', 'notEqual', ''),
       (6, 'Q2', 'notEqual', ''),
       (7, 'Q7', NULL, NULL),
       (8, 'Q7', 'notEqual', ''),
       (9, 'Q8', 'notEqual', ''),
       (10, 'Q8-1', 'notEqual', ''),
       (11, 'Q8-2', 'notEqual', ''),
       (12, 'Q9', 'notEqual', ''),
       (13, 'Q10', 'notEqual', ''),
       (14, 'Q7', 'notEqual', ''),
       (14, 'Q8', 'notEqual', ''),
       (14, 'Q8-1', 'notEqual', ''),
       (14, 'Q8-2', 'notEqual', ''),
       (14, 'Q9', 'notEqual', ''),
       (14, 'Q10', 'notEqual', ''),
       (14, 'Q11', 'notEqual', ''),
       (15, 'Q12', NULL, NULL),
       (16, 'Q12', 'notEqual', ''),
       (17, 'Q13', 'notEqual', ''),
       (18, 'Q14', 'notEqual', ''),
       (19, 'Q15', 'notEqual', ''),
       (20, 'Q16', 'notEqual', ''),
       (21, 'Q17', 'notEqual', ''),
       (22, 'Q12', 'notEqual', ''),
       (22, 'Q13', 'notEqual', ''),
       (22, 'Q14', 'notEqual', ''),
       (22, 'Q15', 'notEqual', ''),
       (22, 'Q16', 'notEqual', ''),
       (22, 'Q17', 'notEqual', ''),
       (22, 'Q18', 'notEqual', ''),
       (23, 'Q19', NULL, NULL),
       (24, 'Q19', 'notEqual', ''),
       (25, 'Q19', 'notEqual', ''),
       (25, 'Q20', 'notEqual', ''),
       (26, 'Q21', NULL, NULL),
       (27, 'Q21', 'notEqual', ''),
       (28, 'Q22', 'notEqual', ''),
       (29, 'Q23', 'notEqual', ''),
       (30, 'Q24', 'notEqual', ''),
       (31, 'Q25', 'notEqual', ''),
       (32, 'Q26', 'notEqual', ''),
       (33, 'Q21', 'notEqual', ''),
       (33, 'Q22', 'notEqual', ''),
       (33, 'Q23', 'notEqual', ''),
       (33, 'Q24', 'notEqual', ''),
       (33, 'Q25', 'notEqual', ''),
       (33, 'Q26', 'notEqual', ''),
       (33, 'Q27', 'notEqual', ''),
       (34, 'Q28', NULL, NULL),
       (35, 'Q28', 'notEqual', ''),
       (36, 'Q28', 'notEqual', ''),
       (36, 'Q29', 'notEqual', ''),
       (37, 'Q30', NULL, NULL),
       (38, 'Q30', 'notEqual', ''),
       (39, 'Q31', 'notEqual', ''),
       (40, 'Q32', 'notEqual', ''),
       (41, 'Q33', 'notEqual', ''),
       (42, 'Q34', 'notEqual', ''),
       (43, 'Q30', 'notEqual', ''),
       (43, 'Q31', 'notEqual', ''),
       (43, 'Q32', 'notEqual', ''),
       (43, 'Q33', 'notEqual', ''),
       (43, 'Q34', 'notEqual', ''),
       (43, 'Q35', 'notEqual', '');


-- Link rules to questions
INSERT INTO question_rules (question_id, rule_id)
VALUES ('Q3', 1),
       ('Q4', 2),
       ('Q5', 3),
       ('Q6', 4),
       ('Q2', 5),
       ('Q7', 7),
       ('Q8', 8),
       ('Q8-1', 9),
       ('Q8-2', 10),
       ('Q9', 11),
       ('Q10', 12),
       ('Q11', 13),
       ('Q12', 15),
       ('Q13', 16),
       ('Q14', 17),
       ('Q15', 18),
       ('Q16', 19),
       ('Q17', 20),
       ('Q18', 21),
       ('Q19', 23),
       ('Q20', 24),
       ('Q21', 26),
       ('Q22', 27),
       ('Q23', 28),
       ('Q24', 29),
       ('Q25', 30),
       ('Q26', 31),
       ('Q27', 32),
       ('Q28', 34),
       ('Q29', 35),
       ('Q30', 37),
       ('Q31', 38),
       ('Q32', 39),
       ('Q33', 40),
       ('Q34', 41),
       ('Q35', 42);